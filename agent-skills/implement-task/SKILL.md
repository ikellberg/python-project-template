---
name: implement-task
description: >
  Полный цикл работы над задачей из трекера (US-XXX / ISS-XXX):
  контекст → планирование → реализация → обновление трекинга.
  Триггеры: "берём US-XXX", "берём ISS-XXX", "делаем  "следующая задача", "делаем US-XXX", "делаем ISS-XXX"
---

# Работа над задачей

Полный цикл: контекст → планирование → реализация → ревью → завершение.

Скилл работает с **US-XXX** (user stories из `docs/user_stories.json`) и **ISS-XXX** (issues из `docs/issues.json`).

## Процесс

### 1. Погружение в контекст

Прочитать параллельно:
- `project_state.md` — текущее состояние, бэклог, грабли
- `docs/user_stories.json` или `docs/issues.json` — acceptance criteria, technical notes, связанные файлы

Если задача не указана явно — предложить верхнюю из Backlog в `project_state.md`.

При старте обновить `project_state.md` → секция Current Sprint.

### 2. Планирование

1. Войти в `EnterPlanMode`
2. Исследовать кодебазу: прочитать файлы, которые будут затронуты
3. Составить план **только для этой задачи**, разбить на vertical slices
4. **СТРОГО ДО ПОКАЗА ПОЛЬЗОВАТЕЛЮ, ТЫ ДОЛЖЕН Сохранить план** в `docs/plans/{ID}-название.md`.
5. **Показать план пользователю** — вывести содержимое файла
6. Выйти через `ExitPlanMode`

**Gate:** Не выходить из PlanMode пока файл плана не создан и не показан.

### 3. Реализация

- Работать по слайсам из плана
- После каждого слайса — **СТОП**, дать пользователю протестировать
- **Никогда** не коммитить без явного разрешения ("ок", "коммитим", "да")

### 4. Ревью

Воспользуйся навыком `get-code-review`.

### 5. Завершение

Перед финальным коммитом обновить трекинг:

**Для US-XXX** — в `docs/user_stories.json`:
- `"passes": true`
- Обновить `technicalNotes` и `relatedFiles`

**Для ISS-XXX** — в `docs/issues.json`:
- `"status": "closed"`

**Всегда** — в `project_state.md`:
- Перенести из Current Sprint в Done
- Обновить Грабли / Архитектуру при необходимости

Все изменения (код + трекинг) — в один коммит. Без явного разрешения пользователя не коммитить.
