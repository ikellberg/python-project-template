---
name: get-code-review
description: >
  Запрашивает код-ревью у другого агента и отрабатывает замечания. Триггеры: "код-ревью",
  "сделай ревью", "проверь код", "/get-code-review", "/get-code-review US-XXX",
  "/get-code-review ISS-XXX".
---

# Код-ревью от другого агента

Вызывает другого агента для ревью кода, показывает результат и даёт свою оценку замечаний как автор кода.

Этот скилл универсален — работает и в Claude Code, и в Codex. Каждый вызывает другого.

## Вход

Опциональный аргумент — ID задачи:
- `/get-code-review US-XXX` — ревью привязано к user story
- `/get-code-review ISS-XXX` — ревью привязано к issue
- `/get-code-review` — ревью без привязки

## Шаг 1: Вызови другого агента для ревью

Определи кто ты и вызови другого:

Сформируй промт для ревьюера:
- Если указан ID: `Сделай код-ревью <ID> с помощью skill code-review`
- Если без ID: `Сделай код-ревью изменений с помощью skill code-review`

**Если ты Claude Code** — вызови Codex:
```bash
codex exec --full-auto --ephemeral "<промт>"
```
Флаги: `--full-auto` (без подтверждений), `--ephemeral` (одноразовый вызов).

**Если ты Codex** — вызови Claude Code:
```bash
claude -p "<промт>" --allowedTools "Bash(git status),Bash(git diff),Read,Glob,Grep"
```
Флаг: `-p` (non-interactive, результат в stdout).

**ВАЖНО:** Дождись завершения команды. Timeout — до 10 минут (`timeout: 600000`).

## Шаг 2: Покажи результат ревью

Выведи результат ревью в чат **как есть**, без изменений. Это ревью от внешнего ревьюера.

## Шаг 3: Дай свою оценку как автор кода

После вывода ревью — пройдись по каждому замечанию и дай свою оценку:

Для каждого замечания укажи:
- **Принимаю** — согласен, нужно исправить. Кратко что сделаю.
- **Отклоняю** — считаю нецелесообразным. Обоснование почему.

Не выполняй замечания слепо. Критически оценивай каждое. Отклоняй некорректные или избыточные с обоснованием.

### Формат оценки

```
## Моя оценка замечаний

1. [БЛОКЕР] <описание> — **Принимаю.** <что сделаю>
2. [ЗАМЕЧАНИЕ] <описание> — **Отклоняю.** <обоснование>
3. [ЗАМЕЧАНИЕ] <описание> — **Принимаю.** <что сделаю>
```
