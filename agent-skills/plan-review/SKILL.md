---
name: plan-review
description: Кросс-валидация планов реализации фич, созданных LLM. Сверяет план с project_state.md и проверяет внутреннюю логику. Выдаёт конкретные замечания и рекомендации. Используй когда пользователь просит сделать ревью плана, проверить план реализации, или упоминает "plan review", "ревью плана", "оценить план", "кросс-валидация".
---

# Plan Review

Этот скилл оценивает качество плана реализации фичи, созданного другой LLM. Результат — конкретный фидбек, который можно скопировать и передать автору плана для доработки.

## Шаг 1: Прочитай project_state.md

Перед анализом плана прочитай `project_state.md` — это компактный источник правды:
- Текущая архитектура проекта
- Используемые технологии
- Что уже реализовано

PRD и user_stories читать не нужно — план должен содержать Acceptance Criteria. Если их нет — это пробел.

## Шаг 2: Прочитай план

План обычно в файле, который укажет пользователь.

## Шаг 3: Проанализируй план

Проверь план по этим аспектам:

**Соответствие архитектуре:**
- Учитывает ли план существующую архитектуру из project_state.md?
- Не дублирует ли существующий функционал?
- Использует ли существующие модули/компоненты где возможно?

**Полнота:**
- Все ли шаги описаны достаточно детально?
- Нет ли пропущенных этапов?
- Учтены ли edge cases?

**Согласованность с проектом:**
- Соответствует ли подход паттернам проекта?
- Нет ли конфликтов с текущим кодом?

**Реализуемость:**
- Можно ли выполнить план как написано?
- Понятна ли последовательность шагов?

## Шаг 4: Сохрани ревью в файл

**ОБЯЗАТЕЛЬНО** сохрани результат ревью в файл:
- Путь: `docs/reviews/US-XXX-plan-review.md`

### Формат файла

ВАЖНО: Формат должен быть понятен LLM, которая будет дорабатывать план.

```markdown
## Ревью плана: [название фичи/задачи]

### Вердикт: [Готов к реализации / Требует доработки]

### Соответствие архитектуре (project_state.md)

- [Конкретное наблюдение со ссылкой на project_state.md]
- [Ещё наблюдение]

### Пробелы в плане

- [Что пропущено] → [Что нужно добавить]
- [Ещё пробел] → [Рекомендация]

### Конфликты с существующей архитектурой

- [Описание конфликта со ссылкой на project_state.md]
(или "Конфликтов не обнаружено")

### Рекомендации для доработки

1. [Конкретное действие с указанием где в плане]
2. [Ещё действие]
3. [...]
```

## Шаг 5: Сообщи пользователю

После сохранения файла сообщи:
- Путь к файлу ревью
- Краткий вердикт

## Правила ревью

1. **Конкретика** — каждое замечание привязано к месту в плане или project_state.md
2. **Ссылки на источник** — "в project_state.md указано...", "в шаге 3 плана..."
3. **Actionable фидбек** — не "подумай над рисками", а "добавь обработку случая X"
4. **Без субъективных оценок** — не "план слабоват", а конкретные факты

## Вердикты

- **Готов к реализации** — план можно выполнять, критических проблем нет
- **Требует доработки** — есть пробелы или конфликты, нужны исправления

## Пример

Пользователь: "Сделай ревью плана из docs/auth_plan.md"

Ты:
1. Читаешь project_state.md
2. Читаешь docs/auth_plan.md
3. Сверяешь план с архитектурой, проверяешь внутреннюю логику
4. Выдаёшь ревью в формате выше
