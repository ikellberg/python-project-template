---
name: implement-task
description: >
  Полный цикл работы над задачей из трекера (US-XXX / ISS-XXX):
  контекст → планирование → реализация → обновление трекинга.
  Триггеры: "берём US-XXX", "берём ISS-XXX", "делаем следующая задача", "делаем US-XXX", "делаем ISS-XXX"
---

# Работа над задачей

Полный цикл: контекст → планирование → реализация → ревью → завершение.

Скилл работает с **US-XXX** (user stories из `docs/stories/US-XXX.md` или `docs/stories/done/US-XXX.md`) и **ISS-XXX** (issues из `docs/issues/ISS-XXX.md` или `docs/issues/done/ISS-XXX.md`).

## Процесс

### 1. Погружение в контекст

Прочитать параллельно:
- `project_state.md` — текущее состояние, бэклог, грабли
- `docs/stories/US-XXX.md` (или `docs/stories/done/US-XXX.md`) или `docs/issues/ISS-XXX.md` (или `docs/issues/done/ISS-XXX.md`) — acceptance criteria, technical notes, связанные файлы

Если задача не указана явно — предложить верхнюю из Backlog в `project_state.md`.

При старте обновить `project_state.md` → секция Current Sprint.

### 2. Планирование

1. Войти в Plan Mode
2. Исследовать кодебазу: прочитать файлы, которые будут затронуты
3. Составить план **только для этой задачи**, разбить на vertical slices
4. Выйти из Plan Mode *(т.к. в режиме планирования нельзя записывать файлы)*
5. Записать план в `docs/plans/{ID}-название.md`
6. Снова войти в Plan Mode (план отобразится пользователю) и сразу выйти, чтобы показать меню действий с планом («что делать дальше с планом»), затем ждать выбора пользователя.


### 3. Реализация

- Работать по слайсам из плана
- После каждого слайса — **СТОП**, дать пользователю протестировать
- **Никогда** не коммитить без явного разрешения ("ок", "коммитим", "да")

### 4. Ревью

1. Посмотреть код-ревью изменений в `docs/reviews/`
2. Прокомментировать замечания — для каждого: принять и исправить, либо отклонить с обоснованием
3. Закрыть: исправить принятые замечания, отмеченные к закрытию — отработать и пометить в файле ревью

### 5. Завершение

Перед финальным коммитом обновить трекинг:

**Для US-XXX** — перенести файл стори в done:
- `mv docs/stories/US-XXX.md docs/stories/done/`
- Обновить `Technical Notes` и `Related Files` в md-файле

**Для ISS-XXX** — перенести файл issue в done:
- `mv docs/issues/ISS-XXX.md docs/issues/done/`

**Всегда** — в `project_state.md`:
- Перенести из Current Sprint в Done
- Обновить Грабли / Архитектуру при необходимости

Все изменения (код + трекинг) — в один коммит. Без явного разрешения пользователя не коммитить.
